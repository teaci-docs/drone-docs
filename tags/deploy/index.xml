<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Deploy on Drone</title>
    <link>http://docs.tea-ci.org/tags/deploy/</link>
    <description>Recent content in Deploy on Drone</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 13 Feb 2016 08:59:23 +0000</lastBuildDate>
    <atom:link href="http://docs.tea-ci.org/tags/deploy/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>SSH</title>
      <link>http://docs.tea-ci.org/plugins/ssh/</link>
      <pubDate>Sat, 13 Feb 2016 08:59:23 +0000</pubDate>
      
      <guid>http://docs.tea-ci.org/plugins/ssh/</guid>
      <description>

&lt;p&gt;Use the SSH plugin to execute commands on a remote server. The following parameters are used to configure this plugin:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt; - address or IP of the remote machine&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt; - port to connect to on the remote machine&lt;/li&gt;
&lt;li&gt;&lt;code&gt;user&lt;/code&gt; - user to log in as on the remote machine&lt;/li&gt;
&lt;li&gt;&lt;code&gt;commands&lt;/code&gt; - list of commands to execute&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Example configuration in your .drone.yml file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;deploy:
  ssh:
    host: foo.com
    user: root
    port: 22
    commands:
      - echo hello
      - echo world
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Example multi-host configuration in your .drone.yml file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;deploy:
  ssh:
    host:
     - foo.com
     - bar.com
    user: root
    port: 22
    sleep: 5
    commands:
      - echo hello
      - echo world
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In the above example Drone executes the commands on multiple hosts sequentially. If the commands fail on a single host this plugin exits immediatly, and will not run your commands on the remaining hosts in the list.&lt;/p&gt;

&lt;p&gt;The above example also uses the &lt;code&gt;sleep&lt;/code&gt; parameter. The sleep parameter instructs Drone to sleep for N seconds between host executions.&lt;/p&gt;

&lt;h2 id=&#34;keys:b5e789e001cfcd9a18b36ef13da96386&#34;&gt;Keys&lt;/h2&gt;

&lt;p&gt;The plugin authenticates to your server using a per-repository SSH key generated by Drone. You can find the public key in your repository settings in Drone. You will need to copy / paste this key into your &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file on your remote machine.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Rsync</title>
      <link>http://docs.tea-ci.org/plugins/rsync/</link>
      <pubDate>Sat, 13 Feb 2016 08:58:35 +0000</pubDate>
      
      <guid>http://docs.tea-ci.org/plugins/rsync/</guid>
      <description>

&lt;p&gt;Use the rsync plugin to deploy files to a server using rsync over ssh. The following parameters are used to configure this plugin:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;user&lt;/code&gt; - connects as this user&lt;/li&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt; - connects to this host address&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt; - connects to this host port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source&lt;/code&gt; - source path from which files are copied&lt;/li&gt;
&lt;li&gt;&lt;code&gt;target&lt;/code&gt; - target path to which files are copied&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delete&lt;/code&gt; - delete extraneous files from the target dir&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recursive&lt;/code&gt; - recursively transfer all files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;include&lt;/code&gt; - include files matching the specified pattern&lt;/li&gt;
&lt;li&gt;&lt;code&gt;exclude&lt;/code&gt; - exclude files matching the specified pattern&lt;/li&gt;
&lt;li&gt;&lt;code&gt;filter&lt;/code&gt; - include or exclude files according to filtering rules&lt;/li&gt;
&lt;li&gt;&lt;code&gt;commands&lt;/code&gt; - execute commands on the remote host after files are copied&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Sample configuration in the &lt;code&gt;.drone.yml&lt;/code&gt; file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;deploy:
  rsync:
    user: root
    host: 127.0.0.1
    port: 22
    source: copy/files/from
    target: send/files/to
    delete: false
    recursive: true
    exclude:
      - &amp;quot;exclude/this/pattern/*&amp;quot;
      - &amp;quot;or/this/one&amp;quot;
    commands:
      - service nginx restart
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;keys:e29a81fe248a90fa58ec2bbdc10e1414&#34;&gt;Keys&lt;/h2&gt;

&lt;p&gt;The plugin authenticates to your server using a per-repository SSH key generated by Drone. You can find the public key in your repository settings in Drone. You will need to copy / paste this key into your &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file on your remote machine.&lt;/p&gt;

&lt;h2 id=&#34;common-problems:e29a81fe248a90fa58ec2bbdc10e1414&#34;&gt;Common Problems&lt;/h2&gt;

&lt;p&gt;The below error message may be encountered when rsync is unable to connect to your server. First verify you can connect to your remote server via ssh. Next, make sure you have added the Drone public key to your server&amp;rsquo;s &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file as described in the previous section.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rsync: connection unexpectedly closed (0 bytes received so far) [sender]
rsync error: unexplained error (code 255) at io.c(226) [sender=3.1.1]
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>