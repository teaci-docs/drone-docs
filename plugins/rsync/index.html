<!DOCTYPE html>
<html ng-app="app" lang="en">
	<head>
		<title>Rsync Â· Drone</title>

		<meta charset="utf-8" />
		<meta content="width=device-width, initial-scale=1" name="viewport" />
		<meta content="ie=edge" http-equiv="x-ua-compatible" />
		<meta name="Description" content="Deploy or update a project via Rsync" />

		<link href="//fonts.googleapis.com/css?family=Roboto:400,300" rel="stylesheet" type="text/css">
		<link href="//fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet" type="text/css">
		<link href="//cdnjs.cloudflare.com/ajax/libs/octicons/3.3.0/octicons.css" rel="stylesheet">
		<link href="/style.css" rel="stylesheet">
		<link href="/prism.css" rel="stylesheet">
		<link href="/docs.css" rel="stylesheet">

	</head>
	<body>

<nav class="top-nav">
	<div class="container">
		<a href="http://docs.tea-ci.org/" class="brand"></a>
		<ul class="list-unstyled list-inline tabs">
			<li><a href="http://docs.tea-ci.org/usage/overview">Usage</a></li>
			
			<li><a href="http://docs.tea-ci.org/plugins" class="current-item">Plugins</a></li>
			<li><a href="http://docs.tea-ci.org/devs">Developers</a></li>
			<li><a href="http://docs.tea-ci.org/community/overview">Community</a></li>
			<li><a href="http://docs.tea-ci.org/setup/overview" >Installation</a></li>
		</ul>
	</div>
</nav>


		<main class="plugins">
			<article class="grid-flex-container container">
					<div class="grid-flex-cell">
						<h1 class="plugin-header"><img src="/logos/rsync.svg" /> Rsync Plugin</h1>
						<section>

<p>Use the rsync plugin to deploy files to a server using rsync over ssh. The following parameters are used to configure this plugin:</p>

<ul>
<li><code>user</code> - connects as this user</li>
<li><code>host</code> - connects to this host address</li>
<li><code>port</code> - connects to this host port</li>
<li><code>source</code> - source path from which files are copied</li>
<li><code>target</code> - target path to which files are copied</li>
<li><code>delete</code> - delete extraneous files from the target dir</li>
<li><code>recursive</code> - recursively transfer all files</li>
<li><code>include</code> - include files matching the specified pattern</li>
<li><code>exclude</code> - exclude files matching the specified pattern</li>
<li><code>filter</code> - include or exclude files according to filtering rules</li>
<li><code>commands</code> - execute commands on the remote host after files are copied</li>
</ul>

<p>Sample configuration in the <code>.drone.yml</code> file:</p>

<pre><code class="language-yaml">deploy:
  rsync:
    user: root
    host: 127.0.0.1
    port: 22
    source: copy/files/from
    target: send/files/to
    delete: false
    recursive: true
    exclude:
      - &quot;exclude/this/pattern/*&quot;
      - &quot;or/this/one&quot;
    commands:
      - service nginx restart
</code></pre>

<h2 id="keys:e29a81fe248a90fa58ec2bbdc10e1414">Keys</h2>

<p>The plugin authenticates to your server using a per-repository SSH key generated by Drone. You can find the public key in your repository settings in Drone. You will need to copy / paste this key into your <code>~/.ssh/authorized_keys</code> file on your remote machine.</p>

<h2 id="common-problems:e29a81fe248a90fa58ec2bbdc10e1414">Common Problems</h2>

<p>The below error message may be encountered when rsync is unable to connect to your server. First verify you can connect to your remote server via ssh. Next, make sure you have added the Drone public key to your server&rsquo;s <code>~/.ssh/authorized_keys</code> file as described in the previous section.</p>

<pre><code>rsync: connection unexpectedly closed (0 bytes received so far) [sender]
rsync error: unexplained error (code 255) at io.c(226) [sender=3.1.1]
</code></pre>
</section>
					</div>

					<div class="grid-flex-cell grid-flex-cell-1of4">
						<nav role='navigation'>
							<h3>Plugin Links</h3>
							
							<ul class='list-unstyled side-nav'>
								<li>
									<a href="http://discuss.drone.io/c/help">
										Get Help
									</a>
								</li>
								<li>
									<a href="https://github.com/drone-plugins/drone-rsync/">
										Source Code
									</a>
								</li>
								<li>
									<a href="https://hub.docker.com/r/plugins/drone-rsync/">
										Docker Image
									</a>
								</li>
							</ul>
						</nav>
						<div class="well">
This website is a <a href="https://github.com/drone/docs" target="_blank">public GitHub repository</a>. Please help us by forking the project and adding to it.
</div>

					</div>
			</article>
		</main>
		<script src="/prism.js"></script>
	</body>
</html>

